@model EmpAddressModel
<input asp-for="EmployeeId" type="hidden" />
<section class="content">
    <div class="container-fluid">
        <div class="form-horizontal">
            <div class="cards-group">
                <div class="card card-default card-popup">
                    <div class="card-body">
                        <div class="form-group row">
                            <div class="col-md-3">
                                <nop-label asp-for="FirstName" />
                            </div>
                            <div class="col-md-7">
                                <nop-editor asp-for="FirstName" asp-required="true" />
                                <span asp-validation-for="FirstName"></span>
                            </div>
                        </div>
                        <div class="form-group row" id="btnDownloadFile">
                            <div class="col-md-3">
                                <nop-label asp-for="LastName" />
                            </div>
                            <div class="col-md-7">
                                <nop-editor asp-for="LastName" asp-required="true"/>
                                <span asp-validation-for="LastName"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <nop-label asp-for="Email" />
                            </div>
                            <div class="col-md-7">
                                <nop-editor asp-for="Email" asp-required="true" />
                                <span asp-validation-for="Email"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <nop-label asp-for="Company" />
                            </div>
                            <div class="col-md-7">
                                <nop-editor asp-for="Company" asp-required="true" />
                                <span asp-validation-for="Company"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <nop-label asp-for="CountryName" />
                            </div>
                            <div class="col-md-7">
                                <nop-select asp-for="CountryId" asp-items="Model.AvailableCountries" asp-required="true" />
                                <span asp-validation-for="CountryId"></span>
                            </div>
                        </div>

                        <div class="form-group row">
                            <div class="col-md-3">
                                <nop-label asp-for="StateProvinceName" />
                            </div>
                            <div class="col-md-7">
                                <nop-select asp-for="StateProvinceId" asp-items="Model.AvailableStates" asp-required="true" />
                                <span asp-validation-for="StateProvinceId"></span>
                            </div>
                        </div>
                        @* <div class="form-group row">
                            <div class="col-md-3">
                                <nop-label asp-for="StateProvinceName" />
                            </div>
                            <div class="col-md-7">
                                <nop-editor asp-for="StateProvinceName" asp-required="true" />
                                <span asp-validation-for="StateProvinceName"></span>
                            </div>
                        </div> *@

                        <div class="form-group row">
                            <div class="col-md-3">
                                <nop-label asp-for="County" />
                            </div>
                            <div class="col-md-7">
                                <nop-editor asp-for="County"/>
                                <span asp-validation-for="County"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <nop-label asp-for="City" />
                            </div>
                            <div class="col-md-7">
                                <nop-editor asp-for="City" asp-required="true" />
                                <span asp-validation-for="City"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <nop-label asp-for="Address1" />
                            </div>
                            <div class="col-md-7">
                                <nop-editor asp-for="Address1" asp-required="true" />
                                <span asp-validation-for="Address1"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <nop-label asp-for="Address2" />
                            </div>
                            <div class="col-md-7">
                                <nop-editor asp-for="Address2" />
                                <span asp-validation-for="Address2"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <nop-label asp-for="ZipPostalCode" />
                            </div>
                            <div class="col-md-7">
                                <nop-editor asp-for="ZipPostalCode" asp-required="true" />
                                <span asp-validation-for="ZipPostalCode"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <nop-label asp-for="PhoneNumber" />
                            </div>
                            <div class="col-md-7">
                                <nop-editor asp-for="PhoneNumber" asp-required="true" />
                                <span asp-validation-for="PhoneNumber"></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <nop-label asp-for="FaxNumber" />
                            </div>
                            <div class="col-md-7">
                                <nop-editor asp-for="FaxNumber" />
                                <span asp-validation-for="FaxNumber"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    $(document).ready(function () {
        $("#@Html.IdFor(model => model.CountryId)").change(function () {
            var selectedItem = $(this).val();
            var ddlStates = $("#@Html.IdFor(model => model.StateProvinceId)");

            var postData = {
                countryId: selectedItem,
                addSelectStateItem: "true"
            };

            $.ajax({
                cache: false,
                type: "GET",
                url: "@(Url.Action("GetStatesByCountryId", "Country"))",
                data: postData,
                success: function (data, textStatus, jqXHR) {
                    ddlStates.html('');
                    $.each(data, function (id, option) {
                        ddlStates.append($('<option></option>').val(option.id).html(option.name));
                    });
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    $("#statesAlert").click();
                }
            });
        });
    });
</script>