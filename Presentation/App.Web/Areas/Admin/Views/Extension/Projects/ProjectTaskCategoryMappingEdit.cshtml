@using App.Web.Areas.Admin.Models.ProjectTaskCategoryMappings

@model ProjectTaskCategoryMappingModel

@{
    Layout = "_AdminPopupLayout";
}

@if (ViewBag.RefreshPage)
{
    <script>
        try {
            var event = new Event('refreshGrid');
            window.opener.dispatchEvent(event);
        }
        catch (e) {
            console.log("Error triggering event: " + e.message);
        }
        window.close();
    </script>
}
else
{
    <form asp-controller="ProjectTaskCategoryMapping" asp-action="Edit" method="post"
          asp-route-id="@Model.Id"
          asp-route-projectId="@Context.Request.Query["projectId"]"
          asp-route-btnId="@Context.Request.Query["btnId"]"
          asp-route-formId="@Context.Request.Query["formId"]">
        <div class="content-header clearfix">
            <h1 class="float-left">
                @T("Admin.ProjectTaskCategoryMapping.Edit") - @Model.ProjectName
            </h1>
            @if (await permissionService.AuthorizeAsync(StandardPermissionProvider.ManageProjectTaskCategoryMapping, PermissionAction.Edit))
            {
                <div class="float-right">
                    <button type="submit" name="save" class="btn btn-primary">
                        <i class="far fa-save"></i>
                        @T("Admin.Common.Save")
                    </button>
                </div>
            }
        </div>
        @await Html.PartialAsync("/Areas/Admin/Views/Extension/Projects/_ProjectTaskCategoryMapping.cshtml", Model)
    </form>
}
